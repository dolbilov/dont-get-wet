(()=>{"use strict";var e={91:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},547:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNzAwLjAwMDAwMHB0IiBoZWlnaHQ9IjcwMC4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDcwMC4wMDAwMDAgNzAwLjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgcG90cmFjZSAxLjE0LCB3cml0dGVuIGJ5IFBldGVyIFNlbGluZ2VyIDIwMDEtMjAxNwo8L21ldGFkYXRhPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCw3MDAuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIgpmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgo8cGF0aCBkPSJNNDAxOCA1MzQ1IGMtMiAtMSAtNDYgLTUgLTk4IC05IC0xMzAgLTkgLTE1OCAtMTQgLTI4OSAtNDcgLTIzMCAtNTkKLTQzOCAtMTYyIC02MjUgLTMwOSAtMTEgLTggLTY3IC02MSAtMTI1IC0xMTcgbC0xMDYgLTEwMiAtODAgLTIgYy0xMjIgLTIKLTE4OCAtOSAtMzExIC0zMyAtMTEwIC0yMiAtMzIxIC05MiAtMzUxIC0xMTggLTcgLTYgLTEzIC04IC0xMyAtNSAwIDMgLTMwCi0xMCAtNjcgLTMwIC00MjkgLTIyOSAtNzI4IC02MTIgLTg0MSAtMTA3MyAtOCAtMzIgLTExIC0zNSAtNDMgLTMzIC03MiA1Ci0yNDUgNCAtMjY5IC0yIC0xNCAtMyAtNDEgLTggLTYwIC0xMSAtMjA2IC0zNCAtNDUwIC0xOTkgLTU3NCAtMzg5IC0xMDAgLTE1MwotMTQ1IC0yOTIgLTE1MSAtNDcwIC0xMyAtMzc5IDIwMCAtNzE0IDU1MCAtODY3IDU2IC0yNCAxMjkgLTQ5IDE2NSAtNTQgOCAtMgo0MCAtNyA3MCAtMTMgNjYgLTEyIDM5MjQgLTkgMzk4NSAzIDIyOCA0NiA0MTQgMTQ0IDU3MSAzMDAgNzQgNzQgMTc0IDIwOSAxODkKMjU1IDUgMTcgMjIgMTkgMjM4IDIwIDIwNiAwIDI1OCAzIDM0NCAxNiAxMjMgMTkgMzI5IDEwOCA0MzggMTkwIDE5MyAxNDQgMzMwCjM0OCAzOTIgNTgzIDMzIDEyNSAzOCAzNDIgMTAgNDYyIC0xMzEgNTY1IC02NjMgOTExIC0xMjM1IDgwNSAtNDUgLTkgLTkzIC0yMAotMTA2IC0yNSAtMjAgLTcgLTI0IC00IC0zNiAyOCAtMjEgNjAgLTk4IDIxMiAtMTQzIDI4MiAtMjgwIDQzNiAtNzY2IDcyNgotMTI2NyA3NTYgLTUyIDMgLTExMCA3IC0xMjcgOCAtMTggMiAtMzQgMiAtMzUgMXogbTI4MiAtMjM1IGMxNjMgLTMwIDI0MSAtNTUKMzk4IC0xMzIgMjkxIC0xNDEgNTI5IC0zODcgNjcwIC02OTAgMjIgLTQ4IDkyIC0yNTQgOTIgLTI3MiAxIC0zNiAxOCAtMzUgMTE2CjggMTM0IDU4IDIwNCA3NSAzMzUgODAgNDA3IDE1IDc2OSAtMjcwIDg1MiAtNjcwIDE0IC02NyAxNiAtMjQ2IDMgLTMwNSAtNTYKLTI2MCAtMjE4IC00NzMgLTQ0NSAtNTg5IC0xMzcgLTY5IC0yMzQgLTg3IC00ODEgLTg5IGwtMjA3IC0yIDEzIDY4IGMyNyAxNDEKMTMgMzM5IC0zNSA0OTMgLTEwMyAzMzEgLTM5NiA2MDQgLTc0MCA2ODkgLTE3NyA0NCAtMzUzIDQ1IC01MjIgMiBsLTY4IC0xNwotMTUgMzUgYy04NiAyMTUgLTIyMyA0MTkgLTM4NyA1NzYgLTEwOSAxMDQgLTEzNiAxMjYgLTI0NCAxOTcgLTE1NCAxMDEgLTI5NgoxNjQgLTQ4OSAyMTcgbC05OSAyNyA2OSA1OSBjMTg3IDE1OCA0MjcgMjY5IDY4MSAzMTQgMTQ0IDI2IDM2MCAyNiA1MDMgMXoKbS0xMjk1IC01ODggYzQxNCAtODcgNzUzIC0zMjYgOTYxIC02NzcgNjYgLTExMiA5OSAtMTg5IDEzOSAtMzIyIDIwIC02NCAzOAotMTE5IDQwIC0xMjMgMyAtNSAyNiAyIDUzIDE0IDE2MiA3OCAyODQgMTA2IDQzNyAxMDEgMjczIC04IDUwMiAtMTMxIDY2MQotMzUxIDEwMSAtMTQxIDE0NyAtMjg3IDE0NyAtNDc0IDEgLTE1MCAtMjAgLTIzNiAtOTEgLTM4MCAtMzkgLTgwIC02MSAtMTA5Ci0xNDIgLTE5MSAtMTM3IC0xMzggLTI3NCAtMjExIC00NjUgLTI0NyAtMjIgLTQgLTkxMyAtNyAtMTk4MCAtNyAtMTg3NCAwCi0xOTQyIDEgLTIwMTAgMTkgLTg4IDI0IC0xNDQgNDkgLTIyMCA5OSAtMTE0IDc2IC0yMjcgMjE2IC0yNzAgMzM3IC00MyAxMTgKLTUzIDI5MiAtMjUgNDA1IDMyIDEyOSAxMjUgMjgwIDIyMiAzNjAgMjYgMjIgNTQgNDUgNjEgNTIgMzMgMjggMTYxIDg1IDIzMwoxMDQgMTI5IDMzIDI2NCAyOCA0MDkgLTE3IDQ0IC0xNCA4NyAtMjcgOTYgLTMwIDkgLTIgMTYgMSAxNiA4IDUgOTggNTQgMzIwCjkyIDQyMCAxMzIgMzQyIDM4MCA2MTQgNzA4IDc3NyAxMTIgNTUgMjkxIDExNSAzODYgMTI3IDIzIDQgNjAgMTAgODIgMTQgNzgKMTUgMzUzIDQgNDYwIC0xOHoiLz4KPC9nPgo8L3N2Zz4K"},12:(e,t,r)=>{e.exports=r.p+"8d8e249904ae1f8efdb9.png"},739:(e,t,r)=>{e.exports=r.p+"80aec7e78c3cb5c61d7c.png"},481:(e,t,r)=>{e.exports=r.p+"f900cb636a38405c84b7.png"},165:(e,t,r)=>{e.exports=r.p+"5c92bc5a35ad6eca0bb3.ico"},428:(e,t,r)=>{e.exports=r.p+"4736e0dae2b05791211b.webmanifest"}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.p="",r.b=document.baseURI||self.location.href,(()=>{var e=r(91),t=r.n(e),n=new URL(r(12),r.b),a=new URL(r(481),r.b),o=new URL(r(739),r.b),i=new URL(r(428),r.b),c=new URL(r(547),r.b),g=new URL(r(165),r.b);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t()(n),t()(a),t()(o),t()(i),t()(c),t()(g);var l=M((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_handleSuccess",(function(e){r._updateForecast(e.coords)})),d(this,"_handleCoordsError",(function(e){console.warn("ERROR ".concat(e.code,": ").concat(e.message)),r._updateForecast(r._defaultCoords)})),d(this,"getUserCoords",(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(r._handleSuccess,r._handleCoordsError):console.warn("Geolocation doesn't support")})),this._updateForecast=t,this._defaultCoords={latitude:55.7558,longitude:37.6176}})),u={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense intensity drizzle",56:"Light freezing drizzle",57:"Dense intensity freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy intensity rain",66:"Light freezing rain",67:"Heavy intensity freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy intensity snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Slight or moderate thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},I=["January","February","March","April","May","June","July","August","September","October","November","December"],y=document.querySelector(".card.card_size_large"),A=document.querySelector(".container.container__small-cards"),T={currentCity:y.querySelector(".card__city-name"),currentDate:y.querySelector(".card__date.card__date_weight_light.card__date-text"),currentTemperature:y.querySelector(".card__temperature-value"),currentWeatherIcon:y.querySelector(".card__icon.card__icon_type_weather"),currentWeatherType:y.querySelector(".card__caption.card__caption_type_weather"),currentMinMaxTemperature:y.querySelector(".card__caption.card__caption_type_delta-temperature"),dailyWeekdays:A.querySelectorAll(".card__weekday"),dailyDates:A.querySelectorAll(".card__date.card__date_position_small-card.card__date_weight_light"),dailyTemperatures:A.querySelectorAll(".card__temperature-value.card__temperature-value_size_small"),dailyWeatherIcons:A.querySelectorAll(".card__icon.card__icon_type_weather.card__icon_size_small"),dailyMinMaxTemperatures:A.querySelectorAll(".card__caption.card__caption_type_delta-temperature")};function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(e){return u[e]},(r="_getDescriptionFromWeatherCode")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this._currentCity=t.current_city,this._currentTemperature=t.current_weather.temperature,this._currentWeatherCode=t.current_weather.weathercode,this._currentDate=new Date(t.current_weather.time),this._dailyMaxTemperatures=t.daily.temperature_2m_max,this._dailyMinTemperatures=t.daily.temperature_2m_min,this._dailyDates=t.daily.time,this._dailyWeatherCodes=t.daily.weathercode}var t,r;return t=e,r=[{key:"showWeather",value:function(e){e.currentDate.textContent=this._getFormattedDate(this._currentDate),e.currentTemperature.textContent=Math.round(this._currentTemperature)+"째",e.currentWeatherType.textContent=this._getDescriptionFromWeatherCode(this._currentWeatherCode),this._getAverageTemperatures();for(var t=1;t<this._dailyDates.length;t++)e.dailyWeekdays[t].textContent=this._getDayName(this._dailyDates[t]);for(var r=0;r<this._dailyDates.length;r++){e.dailyDates[r].textContent=this._getFormattedDate(this._dailyDates[r]),e.dailyTemperatures[r].textContent=this._averageTemperatures[r]+"째";var n="min ".concat(Math.round(this._dailyMinTemperatures[r]),"째 / max ").concat(Math.round(this._dailyMaxTemperatures[r]),"째");e.dailyMinMaxTemperatures[r].textContent=n}}},{key:"_getDayName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",r=new Date(e);return r.toLocaleDateString(t,{weekday:"long"})}},{key:"_getFormattedDate",value:function(e){var t=new Date(e);return I[t.getMonth()]+" "+t.getDate()}},{key:"_getAverageTemperatures",value:function(){if(this._averageTemperatures=[],this._dailyMinTemperatures.length===this._dailyMaxTemperatures.length)for(var e=0;e<this._dailyMaxTemperatures.length;e++){var t=this._dailyMinTemperatures[e],r=this._dailyMaxTemperatures[e];this._averageTemperatures[e]=Math.round((t+r)/2)}}}],r&&D(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=w((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"_getFormattedDate",(function(e){return"".concat(e.getFullYear(),"-").concat(("0"+(e.getMonth()+1)).slice(-2),"-").concat(("0"+e.getDate()).slice(-2))})),h(this,"_getUrl",(function(e,r){var n=new Date;n.setDate(n.getDate()+1);var a=new Date(n);return a.setDate(n.getDate()+2),"https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(r)+"&daily=weathercode,temperature_2m_max,temperature_2m_min&current_weather=true"+"&windspeed_unit=ms&timezone=auto&start_date=".concat(t._getFormattedDate(n),"&end_date=").concat(t._getFormattedDate(a))})),h(this,"getWeatherData",(function(e){var r=e.latitude,n=e.longitude;return fetch(t._getUrl(r,n)).then((function(e){return e.ok?e.json():Promise.reject(e)}))})),h(this,"handleError",(function(e){e.status?console.warn("ERROR ".concat(e.status,": ").concat(e.message)):console.warn("UNKNOWN ERROR: ".concat(e.message))}))}));function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var L=new(function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dropdown=t,this._cityCoords=r,this._onChangeHandler=n,this._dropdownContainer=document.querySelector(".".concat(this._dropdown)),this._dropdownButton=this._dropdownContainer.querySelector(".dropdown__button"),this._dropdownList=this._dropdownContainer.querySelector(".dropdown__select"),this.currentPosition="Moscow",this._openDropdownList=this._openDropdownList.bind(this),this._closeDropdownList=this._closeDropdownList.bind(this),this.getCurrentCoords=this.getCurrentCoords.bind(this)}var t,r;return t=e,(r=[{key:"_openDropdownList",value:function(){this._dropdownList.classList.remove("dropdown__select_close")}},{key:"_closeDropdownList",value:function(){this._dropdownList.classList.add("dropdown__select_close")}},{key:"_handleClose",value:function(e){e.target.classList.contains("dropdown__button")&&this._dropdownList.classList.contains("dropdown__select_close")?this._openDropdownList():this._closeDropdownList(),e.target.classList.contains("body")&&this._closeDropdownList()}},{key:"_changeCurrentPlace",value:function(e){e.target.classList.contains("dropdown__option")&&(this.currentPosition=e.target.textContent,this._dropdownButton.textContent=this.currentPosition,this._closeDropdownList())}},{key:"getCurrentCoords",value:function(){return this._cityCoords[this.currentPosition.split(" ").join("")]}},{key:"setEventListener",value:function(){var e=this;document.addEventListener("click",(function(t){e._handleClose(t)})),this._dropdownList.addEventListener("click",(function(t){e._changeCurrentPlace(t);var r=e.getCurrentCoords();e._onChangeHandler(r)}))}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())("dropdown",{Moscow:{latitude:55.7558,longitude:37.6176},SaintPetersburg:{latitude:59.9389,longitude:30.3156},Novosibirsk:{latitude:55.0302,longitude:82.9204},Yekaterinburg:{latitude:56.838,longitude:60.5974},Kazan:{latitude:55.7961,longitude:49.1064},NizhnyNovgorod:{latitude:56.3267,longitude:44.0065},Chelyabinsk:{latitude:55.1599,longitude:61.4025},Samara:{latitude:53.1958,longitude:50.1002},Omsk:{latitude:54.9893,longitude:73.3682},RostovonDon:{latitude:47.222,longitude:39.7203}},x),z=new l(x),m=new p;function x(e){m.getWeatherData(e).then((function(e){e.current_city=L.currentPosition,new C(e).showWeather(T),T.currentCity.textContent="Your city"})).catch(m.handleError)}L.setEventListener(),z.getUserCoords()})()})();